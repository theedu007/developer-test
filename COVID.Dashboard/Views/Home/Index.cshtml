@{
    ViewBag.Title = "Dashboard";
}
@model COVID.Dashboard.Models.CovidDataViewModel

<script>

    $(document).ready(() => {

        $("#report-button").on("click", () => {
            $.ajax({
                url: "/home/GetDashboardByProvincePartialView",
                method: "GET",
                data: { iso: $("#select-list").val() },
                success: (respose) => {
                    const tableArea = $("#table-row");
                    tableArea.empty();
                    tableArea.append(respose);
                }
            });
        });
    });
</script>

<div class="row">
    <h2>Top 10 COVID Cases</h2>
</div>
<div class="row">
    <div class="col">
        <div class="form-group row">
            <label>Region: </label>
            <div class="col-8">
                @Html.DropDownListFor(m => m.IsoCode,
                    Model.OptionsList,
                    "Regions",
                    new { @class = "form-control", id = "select-list"})
            </div>
            <div class="col-2">
                <button class="btn btn-primary" id="report-button">report</button>
            </div>
        </div>
    </div>
    <div class="col">
        @Html.ActionLink("XML", "GetXmlForRegion", "Download", null, new {@class = "btn btn-primary"})
        @Html.ActionLink("JSON", "GetJsonFileForRegion", "Download", null, new {@class = "btn btn-primary"})
        @Html.ActionLink("CSV", "GetCvsForRegion", "Download", null, new {@class = "btn  btn-primary" })
    </div>
</div>
<div class="row mt-2" id="table-row">
    @{ Html.RenderPartial("TableDashboard", Model); }
</div>